<%= modal header: {text: "Edit #{@persistent_service_consumer_share.label} for #{@app.name}", icon: 'fa-edit'} do %>

  <%= custom_form_for @persistent_service_consumer_share, method: :patch,
        url: app_service_consumer_persistent_share_path(app_id: @app.id) do |f| %>
        <%= f.hidden_field :parent_engine %>
        <%= f.hidden_field :publisher_type_path %>
        <%= f.hidden_field :service_handle %>
    <%= f.fields_for :fields do |ff| %>
      <%= ff.engines_field_builder %>
    <% end %>
    <% cancel_url = app_service_consumer_persistent_share_path(
          app_id: @app.id,
          publisher_type_path: @persistent_service_consumer_share.publisher_type_path,
          service_handle: @persistent_service_consumer_share.service_handle ) %>
    <%= f.engines_cancel_submit url: cancel_url, remote: true %>
  <% end %>

<% end %>
