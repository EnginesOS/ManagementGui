<%= modal header: {text: "New #{@persistent_service_consumer_share_constructor.label} for #{@app.name}", icon: 'fa-plus-square-o'} do %>

  <%= form_for @persistent_service_consumer_share_constructor, method: :post,
        url: app_service_consumer_persistent_create_share_path(app_id: @app.id) do |f| %>
    <%= f.hidden_field :publisher_type_path %>
    <%= f.hidden_field :parent_engine %>
    <%= f.hidden_field :service_handle %>
    <%= f.fields_for :fields do |ff| %>
      <%= ff.engines_field_builder %>
    <% end %>
    <% cancel_url = new_app_service_consumer_path( app_id: @app.id ) %>
    <%= f.engines_cancel_submit url: cancel_url, remote: true %>
  <% end %>

<% end %>
