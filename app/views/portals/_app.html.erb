<%= content_tag :div, class: 'portal-col col-xs-6 col-sm-4 col-md-3 col-lg-2 col-centered' do %>
  <% if app.worker %>
    <% if app.portal_worker_message.present? %>
      <%= link_to app_portal_message_path(app_id: app.id), method: :get, remote: true,
          class: 'btn portal_button', title: app.name do %>
        <%= render 'portals/app_button_body', app: app %>
      <% end %>
    <% else %>
      <%= content_tag :div, disabled: true,
          class: 'btn portal_button', title: app.name do %>
        <%= render 'portals/app_button_body', app: app %>
      <% end %>
    <% end %>
  <% else %>
    <% if app.portal_link.present? %>
      <%= link_to ( app.portal_link.blank? ? '#' : app.portal_link ), method: :get, disabled: app.portal_link.blank?,
          form: { target: "engines_app_#{app.id}" },
          class: 'btn portal_button', title: [ app.name, app.portal_link].compact.join(' - ') do %>
        <%= render 'portals/app_button_body', app: app %>
      <% end %>
    <% else %>
      <%= content_tag :div, disabled: true,
          class: 'btn portal_button', title: app.name do %>
        <%= render 'portals/app_button_body', app: app %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
